{{ define "main" }}
<!-- 브레드크럼 -->
<nav class="breadcrumb">
    <a href="{{ .Site.BaseURL }}">Home</a> 
    <span class="separator">></span>
    {{ range .Params.categories }}
    <a href="{{ "/categories/" | relLangURL }}{{ . | urlize }}">{{ . }}</a>
    <span class="separator">></span>
    {{ end }}
    <span class="current">{{ .Title }}</span>
</nav>

<!-- 포스트 콘텐츠 -->
<article class="post-detail">
    <header class="post-header">
        {{ if .Params.categories }}
        <div class="post-category">
            {{ range .Params.categories }}
            <a href="{{ "/categories/" | relLangURL }}{{ . | urlize }}" class="category-link">{{ . }}</a>
            {{ end }}
        </div>
        {{ end }}
        
        <h1 class="post-title">{{ .Title }}</h1>
        
        <div class="post-meta">
            <div class="author-info">
                <img src="{{ .Params.avatar | default "https://via.placeholder.com/40x40" }}" alt="{{ .Params.author }}" class="author-avatar">
                <div class="author-details">
                    <span class="author-name">{{ .Params.author | default .Site.Params.author }}</span>
                    <time class="post-date" datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "2006.01.02 15:04" }}</time>
                </div>
            </div>
            <div class="post-stats">
                <span class="view-count">조회수 {{ .Params.views | default "0" }}</span>
                <span class="comment-count">댓글 {{ .Params.comments | default "0" }}</span>
            </div>
        </div>
    </header>
    
    <div class="post-content">
        {{ if .Params.image }}
        <div class="featured-image">
            <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" class="main-image">
        </div>
        {{ end }}
        
        <div class="content-body">
            {{ .Content }}
        </div>
    </div>
    
    <footer class="post-footer">
        {{ if .Params.tags }}
        <div class="post-tags">
            {{ range .Params.tags }}
            <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="tag">#{{ . }}</a>
            {{ end }}
        </div>
        {{ end }}
        
        <div class="post-actions">
            <button class="action-btn like-btn">
                <span class="icon">👍</span>
                좋아요 <span class="count">{{ .Params.likes | default "0" }}</span>
            </button>
            <button class="action-btn share-btn">
                <span class="icon">📤</span>
                공유
            </button>
        </div>
    </footer>
</article>

<!-- 관련 포스트 -->
{{ $related := .Site.RegularPages.Related . | first 3 }}
{{ if $related }}
<section class="related-posts">
    <h2 class="section-title">관련 포스트</h2>
    <div class="related-grid">
        {{ range $related }}
        <article class="related-item">
            <a href="{{ .Permalink }}" class="related-link">
                {{ if .Params.image }}
                <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" class="related-image">
                {{ else }}
                <img src="https://via.placeholder.com/200x120" alt="{{ .Title }}" class="related-image">
                {{ end }}
                <div class="related-content">
                    <h3 class="related-title">{{ .Title }}</h3>
                    <p class="related-excerpt">{{ .Summary | truncate 80 }}</p>
                    <span class="related-date">{{ .Date.Format "2006.01.02" }}</span>
                </div>
            </a>
        </article>
        {{ end }}
    </div>
</section>
{{ end }}

<!-- 댓글 섹션 -->
<section class="comments-section">
    <h2 class="section-title">댓글 <span class="comment-count">{{ .Params.comments | default "0" }}</span></h2>
    
    <div class="comment-form">
        <textarea placeholder="댓글을 작성해주세요." rows="4"></textarea>
        <button type="submit" class="submit-btn">댓글 작성</button>
    </div>
    
    <div class="comments-list">
        <!-- 댓글은 JavaScript로 동적 로드 -->
    </div>
    
    <button class="load-more-comments">더 많은 댓글 보기</button>
</section>
{{ end }}
