{{- define "main" }}

{{- if (and site.Params.profileMode.enabled site.Params.profileMode) }}
{{- partial "index_profile.html" . }}
{{- else }}

<article class="first-entry home-info">
    <header class="entry-header">
        <h1>{{ site.Params.title | default site.Title }}</h1>
    </header>
    <div class="entry-content">
        <p>{{ site.Params.description }}</p>
    </div>
</article>

{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
{{- $featuredPages := where $pages "Params.featured" "eq" true }}

{{- if $featuredPages }}
<header class="page-header">
    <h2>추천 게시글</h2>
</header>
{{- range $featuredPages }}
{{- .Render "summary" }}
{{- end }}
{{- else }}
<!-- featured 포스트가 없을 경우 -->
<div class="info-message">
    <p>추천 게시글을 준비 중입니다.</p>
    <p>직접 URL로 게시글에 접근해주세요.</p>
</div>
{{- end }}

{{- end }}

{{- end }}{{/* end main */}}
